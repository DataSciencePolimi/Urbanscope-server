{"version":3,"sources":["model/index.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;;;mBAEG,KAAK;;;;;;sBAGF,QAAQ;;;;oBACV,MAAM;;;;sBACN,SAAS;;;;;;+BAGP,yBAAyB;;;;;AAG5C,IAAM,eAAe,GAAG,OAAO,CAAC;;;AAGhC,IAAI,EAAE,YAAA;IAAE,UAAU,YAAA,CAAC;AACnB,IAAI,GAAG,GAAG,oBAAO,YAAY,CAAE;AAC7B,MAAI,EAAE,OAAO;AACb,OAAK,EAAE,OAAO,EACf,CAAE,CAAC;;;AAIJ,SAAS,KAAK,GAAG;AACf,SAAO,EAAE,CAAC;CACX;AACD,SAAS,aAAa,GAAyB;MAAvB,IAAI,gCAAC,eAAe;;AAC1C,SAAO,yBAAM,EAAE,CAAC,GAAG,CAAE,IAAI,CAAE,CAAE,CAAC;CAC/B;AACD,SAAS,IAAI,GAAG;AACd,MAAI,QAAQ,GAAG,6BAAO,GAAG,CAAC;AAC1B,MAAI,MAAM,GAAG,6BAAO,QAAQ,CAAC;AAC7B,MAAI,OAAO,GAAG,iBAAI,OAAO,CAAE,QAAQ,GAAC,GAAG,EAAE,MAAM,CAAE,CAAC;;AAElD,KAAG,CAAC,KAAK,CAAE,OAAO,CAAE,CAAC;AACrB,IAAE,GAAG,uBAAM,OAAO,CAAE,CAAC;AACrB,YAAU,GAAG,aAAa,EAAE,CAAC;;AAE7B,SAAO,EAAE,CAAC;CACX;AACD,SAAS,KAAK,GAAG;AACf,IAAE,CAAC,KAAK,EAAE,CAAC;CACZ;;;;;;;;;QASQ,IAAI,GAAJ,IAAI;;;QAAE,KAAK,GAAL,KAAK;QAAE,KAAK,GAAL,KAAK;QAAE,aAAa,GAAb,aAAa","file":"model/index.js","sourcesContent":["'use strict';\n// Load system modules\nimport url from 'url';\n\n// Load modules\nimport bunyan from 'bunyan';\nimport monk from 'monk';\nimport wrap from 'co-monk';\n\n// Load my modules\nimport config from '../../config/mongo.json';\n\n// Constant declaration\nconst COLLECTION_NAME = 'posts';\n\n// Module variables declaration\nlet db, collection;\nlet log = bunyan.createLogger( {\n  name: 'model',\n  level: 'trace',\n} );\n\n\n// Module functions declaration\nfunction getDB() {\n  return db;\n}\nfunction getCollection( name=COLLECTION_NAME ) {\n  return wrap( db.get( name ) );\n}\nfunction open() {\n  let hostname = config.url;\n  let dbName = config.database;\n  let fullUrl = url.resolve( hostname+'/', dbName );\n\n  log.trace( fullUrl );\n  db = monk( fullUrl );\n  collection = getCollection();\n\n  return db;\n}\nfunction close() {\n  db.close();\n}\n\n// Module class declaration\n\n// Module initialization (at first load)\n\n// Entry point\n\n// Exports\nexport { open, close, getDB, getCollection };\n\n\n//  50 6F 77 65 72 65 64  62 79  56 6F 6C 6F 78"],"sourceRoot":"/source/"}