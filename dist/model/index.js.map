{"version":3,"sources":["model/index.js"],"names":[],"mappings":";;;;;;;;;;;;mBAEgB,KAAK;;;;;;sBAGF,QAAQ;;;;oBACV,MAAM;;;;sBACN,SAAS;;;;;;+BAGP,yBAAyB;;;;AAV5C,YAAY,CAAC;;;AAab,IAAM,eAAe,GAAG,OAAO,CAAC;;;AAGhC,IAAI,EAAE,YAAA;IAAE,UAAU,YAAA,CAAC;AACnB,IAAI,GAAG,GAAG,oBAAO,YAAY,CAAE;AAC7B,MAAI,EAAE,OAAO;AACb,OAAK,EAAE,OAAO,EACf,CAAE,CAAC;;;AAIJ,SAAS,KAAK,GAAG;AACf,SAAO,EAAE,CAAC;CACX;AACD,SAAS,aAAa,GAAyB;MAAvB,IAAI,gCAAC,eAAe;;AAC1C,SAAO,oBAAM,EAAE,CAAC,GAAG,CAAE,IAAI,CAAE,CAAE,CAAC;CAC/B;AACD,SAAS,IAAI,GAAG;AACd,MAAI,QAAQ,GAAG,6BAAO,GAAG,CAAC;AAC1B,MAAI,MAAM,GAAG,6BAAO,QAAQ,CAAC;AAC7B,MAAI,OAAO,GAAG,iBAAI,OAAO,CAAE,QAAQ,GAAC,GAAG,EAAE,MAAM,CAAE,CAAC;;AAElD,KAAG,CAAC,KAAK,CAAE,OAAO,CAAE,CAAC;AACrB,IAAE,GAAG,kBAAM,OAAO,CAAE,CAAC;AACrB,YAAU,GAAG,aAAa,EAAE,CAAC;;AAE7B,SAAO,EAAE,CAAC;CACX;AACD,SAAS,KAAK,GAAG;AACf,IAAE,CAAC,KAAK,EAAE,CAAC;CACZ;;;;;;;;;QASQ,IAAI,GAAJ,IAAI;;;QAAE,KAAK,GAAL,KAAK;QAAE,KAAK,GAAL,KAAK;QAAE,aAAa,GAAb,aAAa","file":"model/index.js","sourcesContent":["'use strict';\r\n// Load system modules\r\nimport url from 'url';\r\n\r\n// Load modules\r\nimport bunyan from 'bunyan';\r\nimport monk from 'monk';\r\nimport wrap from 'co-monk';\r\n\r\n// Load my modules\r\nimport config from '../../config/mongo.json';\r\n\r\n// Constant declaration\r\nconst COLLECTION_NAME = 'posts';\r\n\r\n// Module variables declaration\r\nlet db, collection;\r\nlet log = bunyan.createLogger( {\r\n  name: 'model',\r\n  level: 'trace',\r\n} );\r\n\r\n\r\n// Module functions declaration\r\nfunction getDB() {\r\n  return db;\r\n}\r\nfunction getCollection( name=COLLECTION_NAME ) {\r\n  return wrap( db.get( name ) );\r\n}\r\nfunction open() {\r\n  let hostname = config.url;\r\n  let dbName = config.database;\r\n  let fullUrl = url.resolve( hostname+'/', dbName );\r\n\r\n  log.trace( fullUrl );\r\n  db = monk( fullUrl );\r\n  collection = getCollection();\r\n\r\n  return db;\r\n}\r\nfunction close() {\r\n  db.close();\r\n}\r\n\r\n// Module class declaration\r\n\r\n// Module initialization (at first load)\r\n\r\n// Entry point\r\n\r\n// Exports\r\nexport { open, close, getDB, getCollection };\r\n\r\n\r\n//  50 6F 77 65 72 65 64  62 79  56 6F 6C 6F 78"],"sourceRoot":"/source/"}