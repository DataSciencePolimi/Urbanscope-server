{"version":3,"sources":["model/index.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,IAAI,GAAG,GAAG,OAAO,CAAE,KAAK,CAAE,CAAC;;;AAG3B,IAAI,MAAM,GAAG,OAAO,CAAE,QAAQ,CAAE,CAAC;AACjC,IAAI,IAAI,GAAG,OAAO,CAAE,MAAM,CAAE,CAAC;AAC7B,IAAI,IAAI,GAAG,OAAO,CAAE,SAAS,CAAE,CAAC;;;AAGhC,IAAI,MAAM,GAAG,OAAO,CAAE,yBAAyB,CAAE,CAAC;;;AAGlD,IAAM,eAAe,GAAG,OAAO,CAAC;;;AAGhC,IAAI,EAAE,YAAA;IAAE,UAAU,YAAA,CAAC;AACnB,IAAI,GAAG,GAAG,MAAM,CAAC,YAAY,CAAE;AAC7B,MAAI,EAAE,OAAO;AACb,OAAK,EAAE,OAAO,EACf,CAAE,CAAC;;;AAIJ,SAAS,KAAK,GAAG;AACf,SAAO,EAAE,CAAC;CACX;AACD,SAAS,aAAa,CAAE,IAAI,EAAG;AAC7B,MAAI,GAAG,IAAI,IAAI,eAAe,CAAC;AAC/B,SAAO,IAAI,CAAE,EAAE,CAAC,GAAG,CAAE,IAAI,CAAE,CAAE,CAAC;CAC/B;AACD,SAAS,IAAI,GAAG;AACd,MAAI,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC;AAC1B,MAAI,MAAM,GAAG,MAAM,CAAC,QAAQ,CAAC;AAC7B,MAAI,OAAO,GAAG,GAAG,CAAC,OAAO,CAAE,QAAQ,GAAC,GAAG,EAAE,MAAM,CAAE,CAAC;;AAElD,KAAG,CAAC,KAAK,CAAE,OAAO,CAAE,CAAC;AACrB,IAAE,GAAG,IAAI,CAAE,OAAO,CAAE,CAAC;AACrB,YAAU,GAAG,aAAa,EAAE,CAAC;;AAE7B,SAAO,EAAE,CAAC;CACX;AACD,SAAS,KAAK,GAAG;AACf,IAAE,CAAC,KAAK,EAAE,CAAC;CACZ;;;;;;;;;AASD,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;AAC3B,MAAM,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;AAC7B,MAAM,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;AAC7B,MAAM,CAAC,OAAO,CAAC,aAAa,GAAG,aAAa,CAAC","file":"model/index.js","sourcesContent":["'use strict';\n// Load system modules\nlet url = require( 'url' );\n\n// Load modules\nlet bunyan = require( 'bunyan' );\nlet monk = require( 'monk' );\nlet wrap = require( 'co-monk' );\n\n// Load my modules\nlet config = require( '../../config/mongo.json' );\n\n// Constant declaration\nconst COLLECTION_NAME = 'posts';\n\n// Module variables declaration\nlet db, collection;\nlet log = bunyan.createLogger( {\n  name: 'model',\n  level: 'trace',\n} );\n\n\n// Module functions declaration\nfunction getDB() {\n  return db;\n}\nfunction getCollection( name ) {\n  name = name || COLLECTION_NAME;\n  return wrap( db.get( name ) );\n}\nfunction open() {\n  let hostname = config.url;\n  let dbName = config.database;\n  let fullUrl = url.resolve( hostname+'/', dbName );\n\n  log.trace( fullUrl );\n  db = monk( fullUrl );\n  collection = getCollection();\n\n  return db;\n}\nfunction close() {\n  db.close();\n}\n\n// Module class declaration\n\n// Module initialization (at first load)\n\n// Entry point\n\n// Exports\nmodule.exports.open = open;\nmodule.exports.close = close;\nmodule.exports.getDB = getDB;\nmodule.exports.getCollection = getCollection;\n\n\n//  50 6F 77 65 72 65 64  62 79  56 6F 6C 6F 78"],"sourceRoot":"/source/"}